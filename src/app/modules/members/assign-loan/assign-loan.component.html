<div class="container-fluid">
  <div class="row">
    <div class="col-sm-10">
      <h2 class="registration-title">Assign Loan to {{data.member.name}}</h2>
    </div>
    <div class="col-sm-2 pr-0" style="text-align: right">
      <button mat-button (click)="closeDialog()">
        <mat-icon>close</mat-icon>
        <span> Close</span>
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <div class="row">
        <!--        Type of Loan-->
        <div class="col-sm-12">
          <mat-form-field appearance="outline">
            <mat-label>Loan Type</mat-label>
            <mat-select [(ngModel)]="loanType" placeholder="Loan Type"
                        (selectionChange)="loanTypeSelected($event.value)">
              <mat-option *ngFor="let contr of data.loanTypes" [value]="contr.id">
                {{contr.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!--        Loan amount-->
        <div class="col-sm-12" *ngIf="loanStartDate && loanType" @fadeIn>
          <mat-form-field appearance="outline">
            <mat-label>Loan amount <span *ngIf="loanAmount">({{loanAmount | number}})</span></mat-label>
            <input matInput [(ngModel)]="loanAmount" type="number" placeholder="Loan amount" (input)="calculateLoan()">
            <mat-hint *ngIf="!!maximumAmount">Maximum available amount is <b>{{maximumAmount | number}}</b></mat-hint>
          </mat-form-field>
        </div>

        <!--        Start Date-->
        <div [ngClass]="maximumAmount ? 'mt-2' : ''" class="col-sm-12" *ngIf="loanType" @fadeIn>
          <mat-form-field appearance="outline">
            <mat-label>Loan start date</mat-label>
            <input readonly matInput [matDatepicker]="endingDate" [(ngModel)]="loanStartDate"/>
            <mat-datepicker-toggle matSuffix [for]="endingDate"></mat-datepicker-toggle>
            <mat-datepicker #endingDate></mat-datepicker>
          </mat-form-field>
        </div>

        <!--        Loan Duration-->
        <div class="col-sm-12" *ngIf="loanStartDate && loanType && loanAmount" @fadeIn>
          <mat-form-field appearance="outline">
            <mat-label>Loan Duration
              <span *ngIf="!duration">({{currentLoanType.min_duration}} to {{currentLoanType.max_duration}} {{durationTYpe}})</span>
              <span *ngIf="duration">({{duration | number}} {{durationTYpe}})</span>
            </mat-label>
            <input matInput [(ngModel)]="duration" placeholder="Loan Duration ({{currentLoanType.min_duration}} to {{currentLoanType.max_duration}} {{durationTYpe}})" (input)="calculateLoan()">
            <mat-hint>From {{currentLoanType.min_duration}} to {{currentLoanType.max_duration}} {{durationTYpe}}</mat-hint>
          </mat-form-field>
        </div>

        <!--        Amount to return-->
        <div class="col-sm-12 mt-2" *ngIf="loanStartDate && loanType && loanAmount && duration" @fadeIn>
          <mat-form-field appearance="outline">
            <mat-label>Amount to return
              <span>({{testToReturn | number}})</span>
            </mat-label>
            <input matInput [(ngModel)]="testToReturn" placeholder="Amount to return" (input)="setAmountPerReturn()">
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="col-sm-6" >
      <div class="menu-grid">
        <div class="img-div">
          <h1 style="font-size: 40px; color: #0d0d0d" class="registration-title">{{data.member.name[0].toUpperCase()}}</h1>
        </div>
        <div>
          <h2 class="registration-title mb-1">{{data.member.name}}</h2>
          <p class="lead">{{data.member.phone_number}}</p>
        </div>
      </div>
      <div class="row summary-area">

        <div class="col-sm-6" *ngIf="loanAmount" @fadeIn>
          <p class="text-muted m-0">Amount Taken <b style="color: #ffffffb5;">({{loanStartDate | date:'mediumDate'}})</b></p>
          <h1 class="registration-title">{{loanAmount | number}}</h1>
        </div>
        <div class="col-sm-6" *ngIf="duration" @fadeIn>
          <p class="text-muted m-0">Duration </p>
          <h1 class="registration-title">{{duration | number}} {{durationTYpe}}</h1>
<!--          <p class="text-muted">from </p>-->
        </div>
        <div class="col-sm-6" style="margin-top: 10px" *ngIf="loanAmount && duration" @fadeIn>
          <p class="text-muted m-0">Amount to return <b style="color: #ffffffb5;">({{newDate | date:'mediumDate'}})</b></p>
          <h1 class="registration-title">{{testToReturn | number}}</h1>
        </div>
        <div class="col-sm-6" style="margin-top: 10px" *ngIf="loanAmount && duration" @fadeIn>
          <p class="text-muted m-0">Amount per return</p>
          <h1 class="registration-title">{{testAmountPerReturn | number}}</h1>
        </div>
        <div class="col-sm-12 mt-3" *ngIf="loanAmount && duration" @fadeIn>
          <app-save-area
            [confirmFirst]="true"
            (cancel)="closeDialog()"
            (save)="save()"
            [savingData]="loading"
          ></app-save-area>
        </div>
      </div>


    </div>
  </div>
</div>
