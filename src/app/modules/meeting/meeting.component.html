<app-shared-layout
  title="Meetings"
  icon="group_work"
  [hideAdd]="true"
  [addIcon]="'group_add'"
  (addItem)="addItem()"
  [addText]="'New Member'"
  [viewDetails]="viewDetails"
  (closeDetails)="closePanel()"
  [animationSize]="'full'"
  [smallForm]="false"
  [formTitle]="panelTitle"
>
  <ng-container ngProjectAs="table">

    <app-next-meeting
      *ngIf="(nextMeeting$ | async)"
      [nextMeeting]="nextMeeting$ | async"
      (completeMeeting)="completeMeeting()"
      (cancelMeeting)="cancelMeeting()"
    ></app-next-meeting>

    <app-empty-meeting
      *ngIf="!(nextMeeting$ | async)"
      (setMeeting)="addItem()"
    ></app-empty-meeting>

    <h3 class="registration-title">
      Previous Meetings
    </h3>

    <p class="registration-title" *ngIf="(meetings$ | async)?.length == 0">
      There are no meeting conducted
    </p>

    <div *ngIf="(meetings$ | async)?.length > 0">
      <div class="meeting-grid">
        <div
          class="single-meeting content-area-shadow zoom-on-hover cursor"
          [ngClass]="routeAnimationsElements"
          (click)="viewMeeting(meeting)"
          *ngFor="let meeting of meetings$ | async"
        >
          <div class="icon-area">
            <mat-icon>date_range</mat-icon>
          </div>
          <div>
            <div style="color: #ffffffb3; font-size: 15px">{{meeting.place}}</div>
            <h1 class="registration-title mb-1">{{meeting.date | date}}</h1>
            <p style="color: #ffffffb3; font-size: 14px" *ngIf="meeting.notes">
              {{meeting.notes}}
            </p>
            <small style="color: #ffffff9e;font-size: 12px">
              <span *ngIf="meeting.memberAttended"><b>You</b> and</span>
              {{meeting.members}}
            </small>
            <small  style="display: block;color: #ffffff61;" *ngIf="!meeting.memberAttended">You missed this meeting</small>
          </div>
        </div>
      </div>
    </div>

  </ng-container>

  <ng-container ngProjectAs="form">
    <app-set-meeting
      *ngIf="viewType == 'add'"
      [group]="group$ | async"
      [currentMeeting]="currentMeeting"
      (closeForm)="closePanel()"
    ></app-set-meeting>

    <app-view-meeting
      *ngIf="viewType == 'view'"
      [group]="group$ | async"
      [members]="members$ | async"
      [currentMeeting]="currentMeeting"
    ></app-view-meeting>

    <app-complete-meeting
      *ngIf="viewType == 'complete'"
      [group]="group$ | async"
      [currentMeeting]="currentMeeting"
      [members]="members$ | async"
      [membersEntities]="membersEntities$ | async"
      (closeForm)="closePanel()"
    ></app-complete-meeting>

    <app-cancel-meeting
      *ngIf="viewType == 'cancel'"
      [group]="group$ | async"
      [currentMeeting]="currentMeeting"
      (closeForm)="closePanel()"
    ></app-cancel-meeting>


  </ng-container>
</app-shared-layout>
